<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }

        .planoFundo{
            background-image:url(fotoPizza.png);
            position: relative;
            height: 100vh;
            width: 100vw;
            opacity: 0.8;
            
        }

        .formulario{
            position: absolute;
            background-color: rgba(0, 0, 0, 0.84);
            top: 10%;
            left: 15%;
            padding: 50px;
            color: rgb(189, 189, 16);
            width: 300px;
            height: 400px;
            text-align: center;
            font-family:'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
            font-size: 17px;
            
        }

        .camposTexto input{
            width: 85%;
            background-color:rgba(241, 247, 253, 0.928);
            text-align: center;
            padding: 5px;  
            height: 16px;
            font-size: 14px;
        }

        .botoes input{
            width: 80px;
            height: 25px;
            background-color: gainsboro;
            color: black;
            font-weight: bold;
        }

        .saidaRelatorio{
            position: absolute;
            background-color: rgba(0, 0, 0, 0.84);
            top: 0%;
            left: 110%;
            padding: 50px;
            color: rgb(234, 234, 234);
            width: 500px;
            height: 400px;
            text-align: center;
            font-family:'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
            font-size: 17px;
        }
        
        .saidaSalvar{
            color: rgb(4, 141, 16);
            font-size: 12px;
            font-weight: bold;
        }



    </style>
</head>
    <body>
        <div class="planoFundo">
            <form>
                <div class="formulario">
                    <h3> Cálculo Custo Benefício Pizza</h3>
                    <br><br>
                    <div class="camposTexto">
                        <label class="labels" for="idNome">Nome da pizza:</label><br><br>
                        <input type="text" id="idNome" name="nmNome" placeholder="Insira um nome"><br><br>
                        
                        <label class="labels" for="idTamanho">Tamanho da pizza:</label><br><br>
                        <input type="number" id="idTamanho" name="nmTamanho" placeholder="Insira o tamanho em (cm)"><br><br>

                        <label class="labels" for="idPreco">Insira o preço da pizza:</label><br><br>
                        <input type="number" id="idPreco" name="nmPreco" placeholder="Preço em reais">
                        <br><br>

                        <output class="saidaSalvar" id="idOut">...</output>
                    </div>
                    <br>
                    <div class="botoes">
                        <input type="button" id="idBtSalvar" value="Salvar">
                        <input type="button" id="idBtLimpar" value="Limpar">
                        <input type="button" id="idBtRelatorio" value="Relatório">
                    </div>
                    <div class="saidaRelatorio">
                        <label class="labels" for="idRelatorio">Relatorio:</label><br><br>
                        
                        <div class="content">
                            <table border="1">
                                <thead>
                                    <th class="center">Nome</th>
                                    <th>Tamanho</th>
                                    <th>Preço</th>
                                    <th>Preço/cm2</th>
                                    <th>Custo Beneficio</th>
                                </thead>
                                <tbody id="tbody">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>



            </form> 
        </div>    

        <script>

            // declarando os botoes
            var btSalvar = document.getElementById('idBtSalvar')
            var btLimpar = document.getElementById('idBtLimpar')
            var btRelatorio = document.getElementById('idBtRelatorio')

            // declarando variaveis de input
            var nome = document.getElementById('idNome')
            var tamanho = document.getElementById('idTamanho')
            var preco = document.getElementById('idPreco')

            // declarando variavel output
            var outSalvar = document.getElementById("idOut")

            // declarando os arrays que receberao as entradas
            var nomes = []
            var tamanhos = []
            var precos = []
            var precoPorCm = []

            // declarando variavel constantes
            const pi = 3.14;

            // ----------- tratando eventos ----------

            // salvar dados da tela
            btSalvar.onclick = function(){
                salvar(nome,tamanho,preco)
            }

            btRelatorio.onclick = function(){
                relacaoPreco(tamanhos, precos)
                tabela()
            }
            
            /*
                Essa funcao irá salvar as entradas na tela em cada vetor correspondente.
            */
            function salvar(nome,tamanho,preco){
                nomes.push(nome.value)
                tamanhos.push(tamanho.value)
                precos.push(preco.value)

                outSalvar.value = "Pizza [ " + nome.value + " ] salva com sucesso!"

                nome.value = ""
                tamanho.value = ""
                preco.value = ""

                nome.focus()
            }

            /*
                Função que irá criar a tabela para o relatório
                baseada em: https://www.youtube.com/watch?v=pVjtv9K3sRM
            */

            function tabela(){
                let tbody = document.getElementById("tbody")

                for (let i=0; i < nomes.length; i++){
                    let tr = tbody.insertRow();

                    let td_nome = tr.insertCell();
                    let td_tam = tr.insertCell();
                    let td_preco = tr.insertCell();
                    let td_precoPorCm = tr.insertCell()

                    td_nome.innerText = nomes[i]
                    td_tam.innerText = tamanhos[i] + " cm"
                    td_preco.innerText = "R$ " + precos[i] 
                    //td_precoPorCm.innerText = "R$  " + relacaoPreco(tamanhos[i], precos[i])
                    td_precoPorCm.innerText = "R$  " + precoPorCm[i]
                    //td_custoBeneficio.innerText = 

                }
            }

            /*
                Funcao calcula o preco por area em cm2 da pizza
                -> area = pi * r^2 (para pizzas cirulares)
                -> entrada: diametro
            */

            function relacaoPreco(diametro, preco){
                
                for (let i=0; i < diametro.length; i++){
                    var area = pi * ( Number((diametro[i]/2)) ** 2 )

                    var precoCm = preco[i] / area

                    precoPorCm.push((Number(precoCm)).toFixed(2))

                return precoPorCm

                }
              
            }

            /*
                Funcao para calcular o melhor custo beneficio:
                -> classificar o preco/tamanho do menor para o maior
                -> o menor preco por tamanho, é o melhor custo beneficio
                -> retorno: array ordenado com os precos por tamanho
            */

            function melhorCustoBeneficio(precoPorCm){}

                var custoBenOrdenado = []
            


            // classificar do menor para o maior, sendo o menor o melhor custo beneficio


        </script>


    </body>
</html>